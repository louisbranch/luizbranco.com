<html>
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<base href="http://luizbranco.com/">
<title>Luiz Branco - software tinkerer</title>
<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="http://luizbranco.com/css/main.css" />

  </head>
	<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<base href="http://luizbranco.com/">
<title>Luiz Branco - software tinkerer</title>
<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="http://luizbranco.com/css/main.css" />

	<body class="">
		<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://luizbranco.com/">
        <h1>luizbranco</h1>
      </a>
      <blockquote>"I tink, therefore I am"</blockquote>
      <p class="lead">
        <i class="material-icons">face</i>
        Hi, my name is Luiz Branco
      </p>
      <p class="lead">
        <i class="material-icons">code</i>
        I'm a software developer
      </p>
      <p class="lead">
        <i class="material-icons">place</i>
        living in Toronto, Canada
      </p>
      <p class="lead">
        <i class="material-icons">email</i>
        <a href="mailto:me@luizbranco.com">me@luizbranco.com</a> | <a href="http://github.com/luizbranco">github</a>
      </p>
    </div>

    <ul class="sidebar-nav">
      
    </ul>

  </div>
</div>


		<div class="content container">
			<div class="post">
			 	<h1 class="post-title">Android backup using MTP</h1>
        <div class="post-details">
          <ul id="tags">
            <li>
              <i class="material-icons">label_outline</i>
            </li>
              
                <li><a href="tags/cmdline">cmdline</a> </li>
              
                <li><a href="tags/linux">linux</a> </li>
              
                <li><a href="tags/android">android</a> </li>
              
          </ul>
          <div class="post-date">
            <i class="material-icons">today</i> 2015-08-31
          </div>
        </div>
        <p><strong>TL/DR</strong> Fast way to backup an android device on Linux using the USB cable, MTP
and rsync</p>

<p><a href="https://wiki.archlinux.org/index.php/MTP">Media Transfer Protocol</a> is available
on most Android devices as the primary method for USB synchronization. On Linux
there are several implementations of MTP on top of libmtp.</p>

<p>On Nexus 5 both mtpfs and jmtps were <em>extremely</em> slow copying files. On this
device, <a href="https://github.com/hanwen/go-mtpfs">go-mtpfs</a> had the best performance
by far copying 9gb of data, but your mileage may vary.</p>

<p>Assuming that you have <code>go-mtpfs</code> and <code>rsync</code> installed and the device is
connected:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%">mkdir -p ~/mnt ~/backup

go-mtpfs ~/mnt <span style="color: #f8f8f2">&amp;</span>

rsync -rP ~/mnt ~/backup

fusemount -u ~/mnt
</pre></div>


<p><code>-rP</code> on rsync stands for recursive and with progress. It&rsquo;s worth checking the
documentation for additional flags that might be useful to you. <code>-c</code> can be
used for recurrent backups to avoid copying files already on disk by computing
their checksum.</p>

			</div>
		</div>

  </body>
</html>
