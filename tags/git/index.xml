<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Git on Luiz Branco - software tinkerer</title>
    <link>http://luizbranco.com/tags/git/</link>
    <description>Recent content in Git on Luiz Branco - software tinkerer</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sun, 16 Aug 2015 20:26:20 -0400</lastBuildDate>
    <atom:link href="http://luizbranco.com/tags/git/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>gtt - git time tracker</title>
      <link>http://luizbranco.com/post/gtt/</link>
      <pubDate>Sun, 16 Aug 2015 20:26:20 -0400</pubDate>
      
      <guid>http://luizbranco.com/post/gtt/</guid>
      <description>

&lt;p&gt;&lt;strong&gt;TL/DR&lt;/strong&gt; If you code and need to create regular invoices of your working hours,
you might want to give gtt a try.&lt;/p&gt;

&lt;h2 id=&#34;what-is-gtt:cea081d7e3b6984eb4e59d1cc6676f8a&#34;&gt;What is gtt&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;g&lt;/strong&gt;it &lt;strong&gt;t&lt;/strong&gt;ime &lt;strong&gt;t&lt;/strong&gt;racker is a simple program that allows you to track how
much time you spend coding per day and, at the end of a period, generate an
invoice. Even though it has git on its name, gtt can work with any version
control system that supports commit hooks or by directly issuing commands from
the terminal.&lt;/p&gt;

&lt;h2 id=&#34;how-it-works:cea081d7e3b6984eb4e59d1cc6676f8a&#34;&gt;How it works&lt;/h2&gt;

&lt;p&gt;Assuming you have downloaded &lt;a href=&#34;http://github.com/luizbranco/gtt/releases&#34;&gt;gtt&lt;/a&gt;
and you have added it to your PATH, this is an example of a workflow:&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #272822&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #75715e&#34;&gt;# creates a .gtt file in the current directory&lt;/span&gt;
gtt init

&lt;span style=&#34;color: #75715e&#34;&gt;# adds a hook to .git/hooks/commit-msg&lt;/span&gt;
gtt hook git

&lt;span style=&#34;color: #75715e&#34;&gt;# starts the current day&lt;/span&gt;
gtt start

&lt;span style=&#34;color: #75715e&#34;&gt;# ...&lt;/span&gt;

&lt;span style=&#34;color: #75715e&#34;&gt;# tracks the first line of the commit message and when it was made&lt;/span&gt;
git commit -m &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;fix bug #42&amp;quot;&lt;/span&gt;

&lt;span style=&#34;color: #75715e&#34;&gt;# ...&lt;/span&gt;

&lt;span style=&#34;color: #75715e&#34;&gt;# pauses the tracking time&lt;/span&gt;
gtt pause

&lt;span style=&#34;color: #75715e&#34;&gt;# ... grabbing lunch :)&lt;/span&gt;

&lt;span style=&#34;color: #75715e&#34;&gt;# resumes the time&lt;/span&gt;
gtt resume

&lt;span style=&#34;color: #75715e&#34;&gt;# tracks a task manually (that is what the commit hook uses under the hood)&lt;/span&gt;
gtt task &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;attending a very productive meeting&amp;quot;&lt;/span&gt;

&lt;span style=&#34;color: #75715e&#34;&gt;# displays how much time was spent between the start of the day and the last task, excluding pauses&lt;/span&gt;
gtt status
&amp;gt; &lt;span style=&#34;color: #f92672&#34;&gt;[&lt;/span&gt;STATUS&lt;span style=&#34;color: #f92672&#34;&gt;]&lt;/span&gt; 2h35m
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id=&#34;generating-an-invoice:cea081d7e3b6984eb4e59d1cc6676f8a&#34;&gt;Generating an invoice&lt;/h3&gt;

&lt;p&gt;gtt can create a simple invoice between two periods as a html page:&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #272822&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #75715e&#34;&gt;# outputs an html invoice to stdout, you can the write to a file&lt;/span&gt;
gtt invoice --from&lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt;2015-08-01 --to&lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt;2015-08-31 --cost-per-hour&lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt;1.00 &amp;gt; invoice.html
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;why-i-created-gtt:cea081d7e3b6984eb4e59d1cc6676f8a&#34;&gt;Why I created gtt&lt;/h2&gt;

&lt;p&gt;Almost four years ago I started working remotely for &lt;a href=&#34;http://www.replaypoker.com&#34;&gt;Replay
Poker&lt;/a&gt; and I needed to keep track of my hours
worked.  Since my schedule was very flexible, it was important to record the
duration of tasks and breaks. At first I said: &amp;ldquo;this is simple, I just need a
spreadsheet&amp;rdquo;. That approach was a failure from the start&amp;hellip;&lt;/p&gt;

&lt;p&gt;Every day I would forget to update the spreadsheet and I would need to go back
to my commit history or messages on the team chat to fix missing time periods.
Then instead of days, it became weeks and, finally the whole month.&lt;/p&gt;

&lt;p&gt;Since most my tasks were reflected as git commits, I then decided to use the
commit message and timestamp as the basic unit to keep track of my time, while
having a easy way to input other tasks, such as meetings, and pauses.&lt;/p&gt;

&lt;h2 id=&#34;gtt-v1:cea081d7e3b6984eb4e59d1cc6676f8a&#34;&gt;gtt v1&lt;/h2&gt;

&lt;p&gt;On September 14th, 2012 the first version of gtt was born. It consisted of two
parts: the &lt;a href=&#34;https://github.com/luizbranco/gtt-v1-cli&#34;&gt;cli&lt;/a&gt;, written in ruby, and
the &lt;a href=&#34;https://github.com/luizbranco/gtt-v1-server&#34;&gt;server&lt;/a&gt; in nodejs with CouchDB
as the database running locally.&lt;/p&gt;

&lt;p&gt;Two fun facts about the first cli version:&lt;/p&gt;

&lt;p&gt;1) The &lt;code&gt;start&lt;/code&gt; &lt;code&gt;end&lt;/code&gt; &lt;code&gt;pause&lt;/code&gt; &lt;code&gt;resume&lt;/code&gt; commands were integrated with
&lt;a href=&#34;https://campfirenow.com/&#34;&gt;Campfire&lt;/a&gt;, the chat service we used to use, and
automatically would send messages to the &amp;ldquo;Lobby&amp;rdquo; room:&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #272822&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;opts&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;on(&lt;/span&gt;&lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;--start-day [CHAT_MESSAGE]&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;Start a new working day&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color: #66d9ef&#34;&gt;do&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;|&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;chat_msg&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;|&lt;/span&gt;
  &lt;span style=&#34;color: #f8f8f2&#34;&gt;response&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;tracker&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;start_day&lt;/span&gt;
  &lt;span style=&#34;color: #f8f8f2&#34;&gt;chat_msg&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;||=&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;#39;Morning o/&amp;#39;&lt;/span&gt;
  &lt;span style=&#34;color: #f8f8f2&#34;&gt;talker&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;send_message(chat_msg)&lt;/span&gt; &lt;span style=&#34;color: #66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;talker&lt;/span&gt;
&lt;span style=&#34;color: #66d9ef&#34;&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2) It had 0 tests :(&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #272822&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;describe&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;Gtt&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #66d9ef&#34;&gt;do&lt;/span&gt;
  &lt;span style=&#34;color: #f8f8f2&#34;&gt;it&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;fails&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #66d9ef&#34;&gt;do&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;fail&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;hey buddy, you should probably rename this file and start specing for real&amp;quot;&lt;/span&gt;
  &lt;span style=&#34;color: #66d9ef&#34;&gt;end&lt;/span&gt;
&lt;span style=&#34;color: #66d9ef&#34;&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;gtt-v2:cea081d7e3b6984eb4e59d1cc6676f8a&#34;&gt;gtt v2&lt;/h2&gt;

&lt;p&gt;Two years later, on April 2014, the version 2 started to take shape. The basic
idea for a new version was to run gtt in a SaaS style, without the need to run
the database locally. It allowed me to share the same project across multiple
devices and a web interface to view and generate invoices.&lt;/p&gt;

&lt;p&gt;The project was then split in three parts, the
&lt;a href=&#34;https://github.com/luizbranco/gtt-v2-cli&#34;&gt;cli&lt;/a&gt;, now written in nodejs too, the
&lt;a href=&#34;https://github.com/luizbranco/gtt-v2-server&#34;&gt;server&lt;/a&gt; and a front-end
&lt;a href=&#34;https://github.com/luizbranco/gtt-v2-site&#34;&gt;site&lt;/a&gt;. This last part was,
unfortunately never finished, so the only way to generate invoice was to clone
the repo and dump the database to create the invoice.&lt;/p&gt;

&lt;p&gt;Version 2 was more a learn experience than a successful upgrade. It allowed me
to play with javascript &lt;a href=&#34;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*&#34;&gt;generator
functions&lt;/a&gt;
and to write a better API for the server. Also, it had proper testing!&lt;/p&gt;

&lt;div class=&#34;highlight&#34; style=&#34;background: #272822&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #a6e22e&#34;&gt;it&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;adds a new task&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color: #66d9ef&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color: #a6e22e&#34;&gt;done&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;){&lt;/span&gt;
  &lt;span style=&#34;color: #a6e22e&#34;&gt;co&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color: #66d9ef&#34;&gt;function&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;{&lt;/span&gt;
    &lt;span style=&#34;color: #66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color: #a6e22e&#34;&gt;response&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #66d9ef&#34;&gt;yield&lt;/span&gt; &lt;span style=&#34;color: #a6e22e&#34;&gt;model&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #a6e22e&#34;&gt;addTask&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color: #a6e22e&#34;&gt;user&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;important task&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color: #a6e22e&#34;&gt;assert&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #a6e22e&#34;&gt;deepEqual&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color: #a6e22e&#34;&gt;response&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;OK&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color: #a6e22e&#34;&gt;done&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;();&lt;/span&gt;
  &lt;span style=&#34;color: #f8f8f2&#34;&gt;})();&lt;/span&gt;
&lt;span style=&#34;color: #f8f8f2&#34;&gt;});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id=&#34;gtt-v3:cea081d7e3b6984eb4e59d1cc6676f8a&#34;&gt;gtt v3&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://github.com/luizbranco/gtt&#34;&gt;Version 3&lt;/a&gt; was recently launched and it is
still a working in progress. It removes every non-essential part of the tool and
simplify its design:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Instead of a database it uses a regular file to store the daily log. This
allows offline access, privacy, easy backup and sharing the same &lt;code&gt;.gtt&lt;/code&gt; file
using symbolic links;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;The invoice generation is also embedded in the application and it allows
custom date ranges. Up to version 2 only full months were allowed;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;The whole tool is a cross-platform single executable written in
&lt;a href=&#34;http://golang.org&#34;&gt;go&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If gtt can facilitate your billing workflow, please share your ideas on the
&lt;a href=&#34;http://github.com/luizbranco/gtt/issues&#34;&gt;issues&lt;/a&gt; page.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>